1073 [background-preinit] INFO  o.h.validator.internal.util.Version
                – HV000001: Hibernate Validator 6.2.2.Final
1092 [main] INFO  com.example.EX18.Ex18Application
                – Starting Ex18Application using Java 17.0.3 on vladimir-bohkwax9x with PID 32148 (/home/vladimir/Downloads/JavaPatternMirea/EX18/target/classes started by vladimir in /home/vladimir/Downloads/JavaPatternMirea/EX18)
1097 [main] INFO  com.example.EX18.Ex18Application
                – No active profile set, falling back to 1 default profile: "default"
2185 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2248 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Finished Spring Data repository scanning in 55 ms. Found 2 JPA repository interfaces.
3085 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat initialized with port(s): 8080 (http)
3100 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Initializing ProtocolHandler ["http-nio-8080"]
3102 [main] INFO  o.a.catalina.core.StandardService
                – Starting service [Tomcat]
3103 [main] INFO  o.a.catalina.core.StandardEngine
                – Starting Servlet engine: [Apache Tomcat/9.0.58]
3189 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring embedded WebApplicationContext
3190 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext
                – Root WebApplicationContext: initialization completed in 1967 ms
3415 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Starting...
3500 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Start completed.
3574 [main] INFO  o.h.jpa.internal.util.LogHelper
                – HHH000204: Processing PersistenceUnitInfo [name: default]
3625 [main] INFO  org.hibernate.Version
                – HHH000412: Hibernate ORM core version 5.6.5.Final
3850 [main] INFO  o.h.annotations.common.Version
                – HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
3965 [main] INFO  org.hibernate.dialect.Dialect
                – HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
4862 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator
                – HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
4877 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Initialized JPA EntityManagerFactory for persistence unit 'default'
5577 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration
                – spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
5804 [main] INFO  o.s.s.w.DefaultSecurityFilterChain
                – Will not secure any request
6502 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Starting ProtocolHandler ["http-nio-8080"]
6518 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat started on port(s): 8080 (http) with context path ''
6530 [main] INFO  o.s.s.a.ScheduledAnnotationBeanPostProcessor
                – No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
6542 [main] INFO  com.example.EX18.Ex18Application
                – Started Ex18Application in 6.044 seconds (JVM running for 7.315)
9061 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring DispatcherServlet 'dispatcherServlet'
9062 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Initializing Servlet 'dispatcherServlet'
9063 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Completed initialization in 1 ms
18436 [http-nio-8080-exec-4] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: saveUser
18532 [http-nio-8080-exec-4] INFO  com.example.EX18.Service.Service
                – User saved: User{id=26, firstName='null', lastName='null', middleName='null', birthDate='null', username='degtyarev02', password='$2a$08$drF8j3flqNlZnW7LK4VXaehYNarO4isKdgUukY7JLwCiLZH.w24Rm', active=true, password2='12', roles=[USER]}
18533 [http-nio-8080-exec-4] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:96
22064 [http-nio-8080-exec-6] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: loadUserByUsername
22102 [http-nio-8080-exec-6] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:38
24347 [http-nio-8080-exec-8] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
24348 [http-nio-8080-exec-8] INFO  com.example.EX18.Service.Service
                – Find all users
24369 [http-nio-8080-exec-8] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:22
26130 [http-nio-8080-exec-9] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: findUser
26142 [http-nio-8080-exec-9] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:12
26143 [http-nio-8080-exec-9] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: deleteUser
26168 [http-nio-8080-exec-9] INFO  com.example.EX18.Service.Service
                – UserUser{id=25, firstName='null', lastName='null', middleName='null', birthDate='null', username='user', password='$2a$08$thE00g1w01LztymVfM7PpeDv4GCBxQC.k23rphS9xOaVUnKbp7oWm', active=true, password2='null', roles=[]}delete
26169 [http-nio-8080-exec-9] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:26
26188 [http-nio-8080-exec-9] WARN  o.h.e.jdbc.spi.SqlExceptionHelper
                – SQL Error: 0, SQLState: 23503
26188 [http-nio-8080-exec-9] ERROR o.h.e.jdbc.spi.SqlExceptionHelper
                – ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(25) всё ещё есть ссылки в таблице "posts".
26191 [http-nio-8080-exec-9] INFO  o.h.e.j.b.i.AbstractBatchImpl
                – HHH000010: On release of batch it still contained JDBC statements
26218 [http-nio-8080-exec-9] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet]
                – Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(25) всё ещё есть ссылки в таблице "posts".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:166)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:134)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3958)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1402)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:493)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3285)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2420)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at com.example.EX18.Service.Service$$EnhancerBySpringCGLIB$$fa74131e.deleteUser(<generated>)
	at com.example.EX18.Controllers.UserController.deleteUsers(UserController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:142)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:82)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
70790 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
70790 [http-nio-8080-exec-1] INFO  com.example.EX18.Service.Service
                – Find all users
70799 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:9
72795 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: findUser
72797 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:2
72797 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: deleteUser
72801 [http-nio-8080-exec-2] INFO  com.example.EX18.Service.Service
                – UserUser{id=25, firstName='null', lastName='null', middleName='null', birthDate='null', username='user', password='$2a$08$thE00g1w01LztymVfM7PpeDv4GCBxQC.k23rphS9xOaVUnKbp7oWm', active=true, password2='null', roles=[]}delete
72802 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:5
72805 [http-nio-8080-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper
                – SQL Error: 0, SQLState: 23503
72805 [http-nio-8080-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper
                – ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(25) всё ещё есть ссылки в таблице "posts".
72805 [http-nio-8080-exec-2] INFO  o.h.e.j.b.i.AbstractBatchImpl
                – HHH000010: On release of batch it still contained JDBC statements
72817 [http-nio-8080-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet]
                – Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(25) всё ещё есть ссылки в таблице "posts".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:166)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:134)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3958)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1402)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:493)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3285)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2420)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at com.example.EX18.Service.Service$$EnhancerBySpringCGLIB$$fa74131e.deleteUser(<generated>)
	at com.example.EX18.Controllers.UserController.deleteUsers(UserController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:142)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:82)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
74057 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
74057 [http-nio-8080-exec-3] INFO  com.example.EX18.Service.Service
                – Find all users
74066 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:9
134607 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Closing JPA EntityManagerFactory for persistence unit 'default'
134610 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown initiated...
134617 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown completed.
958  [background-preinit] INFO  o.h.validator.internal.util.Version
                – HV000001: Hibernate Validator 6.2.2.Final
964  [main] INFO  com.example.EX18.Ex18Application
                – Starting Ex18Application using Java 17.0.3 on vladimir-bohkwax9x with PID 32547 (/home/vladimir/Downloads/JavaPatternMirea/EX18/target/classes started by vladimir in /home/vladimir/Downloads/JavaPatternMirea/EX18)
966  [main] INFO  com.example.EX18.Ex18Application
                – No active profile set, falling back to 1 default profile: "default"
1868 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Bootstrapping Spring Data JPA repositories in DEFAULT mode.
1926 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Finished Spring Data repository scanning in 49 ms. Found 2 JPA repository interfaces.
2748 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat initialized with port(s): 8080 (http)
2759 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Initializing ProtocolHandler ["http-nio-8080"]
2759 [main] INFO  o.a.catalina.core.StandardService
                – Starting service [Tomcat]
2760 [main] INFO  o.a.catalina.core.StandardEngine
                – Starting Servlet engine: [Apache Tomcat/9.0.58]
2834 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring embedded WebApplicationContext
2835 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext
                – Root WebApplicationContext: initialization completed in 1800 ms
3038 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Starting...
3122 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Start completed.
3189 [main] INFO  o.h.jpa.internal.util.LogHelper
                – HHH000204: Processing PersistenceUnitInfo [name: default]
3237 [main] INFO  org.hibernate.Version
                – HHH000412: Hibernate ORM core version 5.6.5.Final
3387 [main] INFO  o.h.annotations.common.Version
                – HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
3493 [main] INFO  org.hibernate.dialect.Dialect
                – HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
4278 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator
                – HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
4287 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Initialized JPA EntityManagerFactory for persistence unit 'default'
4960 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration
                – spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
5194 [main] INFO  o.s.s.w.DefaultSecurityFilterChain
                – Will not secure any request
5956 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Starting ProtocolHandler ["http-nio-8080"]
5972 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat started on port(s): 8080 (http) with context path ''
5985 [main] INFO  o.s.s.a.ScheduledAnnotationBeanPostProcessor
                – No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
5996 [main] INFO  com.example.EX18.Ex18Application
                – Started Ex18Application in 5.519 seconds (JVM running for 6.76)
6359 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring DispatcherServlet 'dispatcherServlet'
6359 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Initializing Servlet 'dispatcherServlet'
6362 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Completed initialization in 3 ms
6450 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
6456 [http-nio-8080-exec-1] INFO  com.example.EX18.Service.Service
                – Find all users
6582 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:132
8698 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: findUser
8718 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:20
8719 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: deleteUser
8764 [http-nio-8080-exec-2] INFO  com.example.EX18.Service.Service
                – UserUser{id=25, firstName='null', lastName='null', middleName='null', birthDate='null', username='user', password='$2a$08$thE00g1w01LztymVfM7PpeDv4GCBxQC.k23rphS9xOaVUnKbp7oWm', active=true, password2='null', roles=[]}delete
8764 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:45
8783 [http-nio-8080-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper
                – SQL Error: 0, SQLState: 23503
8783 [http-nio-8080-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper
                – ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(25) всё ещё есть ссылки в таблице "posts".
8786 [http-nio-8080-exec-2] INFO  o.h.e.j.b.i.AbstractBatchImpl
                – HHH000010: On release of batch it still contained JDBC statements
8808 [http-nio-8080-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet]
                – Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(25) всё ещё есть ссылки в таблице "posts".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:166)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:134)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3958)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1402)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:493)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3285)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2420)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at com.example.EX18.Service.Service$$EnhancerBySpringCGLIB$$5eba5f31.deleteUser(<generated>)
	at com.example.EX18.Controllers.UserController.deleteUsers(UserController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:142)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:82)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
84906 [pool-1-thread-1] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: doScheduledTask
84915 [pool-1-thread-1] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
84915 [pool-1-thread-1] INFO  com.example.EX18.Service.Service
                – Find all users
84923 [pool-1-thread-1] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:7
84925 [pool-1-thread-1] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getPosts
84926 [pool-1-thread-1] INFO  com.example.EX18.Service.Service
                – Find all posts
84935 [pool-1-thread-1] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:9
84943 [pool-1-thread-1] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:18
102621 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Closing JPA EntityManagerFactory for persistence unit 'default'
102624 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown initiated...
102631 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown completed.
802  [background-preinit] INFO  o.h.validator.internal.util.Version
                – HV000001: Hibernate Validator 6.2.2.Final
801  [main] INFO  com.example.EX18.Ex18Application
                – Starting Ex18Application using Java 17.0.3 on vladimir-bohkwax9x with PID 32946 (/home/vladimir/Downloads/JavaPatternMirea/EX18/target/classes started by vladimir in /home/vladimir/Downloads/JavaPatternMirea/EX18)
804  [main] INFO  com.example.EX18.Ex18Application
                – No active profile set, falling back to 1 default profile: "default"
1708 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Bootstrapping Spring Data JPA repositories in DEFAULT mode.
1769 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Finished Spring Data repository scanning in 51 ms. Found 2 JPA repository interfaces.
2555 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat initialized with port(s): 8080 (http)
2573 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Initializing ProtocolHandler ["http-nio-8080"]
2575 [main] INFO  o.a.catalina.core.StandardService
                – Starting service [Tomcat]
2575 [main] INFO  o.a.catalina.core.StandardEngine
                – Starting Servlet engine: [Apache Tomcat/9.0.58]
2675 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring embedded WebApplicationContext
2675 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext
                – Root WebApplicationContext: initialization completed in 1813 ms
2840 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Starting...
2959 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Start completed.
3015 [main] INFO  o.h.jpa.internal.util.LogHelper
                – HHH000204: Processing PersistenceUnitInfo [name: default]
3057 [main] INFO  org.hibernate.Version
                – HHH000412: Hibernate ORM core version 5.6.5.Final
3204 [main] INFO  o.h.annotations.common.Version
                – HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
3316 [main] INFO  org.hibernate.dialect.Dialect
                – HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
4095 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator
                – HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
4107 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Initialized JPA EntityManagerFactory for persistence unit 'default'
4737 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration
                – spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
4946 [main] INFO  o.s.s.w.DefaultSecurityFilterChain
                – Will not secure any request
5598 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Starting ProtocolHandler ["http-nio-8080"]
5612 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat started on port(s): 8080 (http) with context path ''
5624 [main] INFO  o.s.s.a.ScheduledAnnotationBeanPostProcessor
                – No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
5635 [main] INFO  com.example.EX18.Ex18Application
                – Started Ex18Application in 5.308 seconds (JVM running for 6.293)
25507 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring DispatcherServlet 'dispatcherServlet'
25507 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Initializing Servlet 'dispatcherServlet'
25509 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Completed initialization in 1 ms
31446 [http-nio-8080-exec-5] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getPosts
31459 [http-nio-8080-exec-5] INFO  com.example.EX18.Service.Service
                – Find all posts
31627 [http-nio-8080-exec-5] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:180
34294 [http-nio-8080-exec-6] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: findPost
34317 [http-nio-8080-exec-6] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:22
34318 [http-nio-8080-exec-6] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: deletePost
34345 [http-nio-8080-exec-6] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: send
37029 [http-nio-8080-exec-6] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:2683
37039 [http-nio-8080-exec-6] INFO  com.example.EX18.Service.Service
                – Post Post{id=73, text='ds', creationDate='24 марта', author=null} is delete
37040 [http-nio-8080-exec-6] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:2694
37066 [http-nio-8080-exec-6] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getPosts
37067 [http-nio-8080-exec-6] INFO  com.example.EX18.Service.Service
                – Find all posts
37069 [http-nio-8080-exec-6] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:2
37109 [http-nio-8080-exec-7] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getPosts
37110 [http-nio-8080-exec-7] INFO  com.example.EX18.Service.Service
                – Find all posts
37112 [http-nio-8080-exec-7] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:2
39467 [http-nio-8080-exec-8] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
39468 [http-nio-8080-exec-8] INFO  com.example.EX18.Service.Service
                – Find all users
39486 [http-nio-8080-exec-8] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:18
40148 [http-nio-8080-exec-9] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
40148 [http-nio-8080-exec-9] INFO  com.example.EX18.Service.Service
                – Find all users
40155 [http-nio-8080-exec-9] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:7
41378 [http-nio-8080-exec-10] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: findUser
41387 [http-nio-8080-exec-10] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:9
41388 [http-nio-8080-exec-10] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: deleteUser
41416 [http-nio-8080-exec-10] INFO  com.example.EX18.Service.Service
                – UserUser{id=25, firstName='null', lastName='null', middleName='null', birthDate='null', username='user', password='$2a$08$thE00g1w01LztymVfM7PpeDv4GCBxQC.k23rphS9xOaVUnKbp7oWm', active=true, password2='null', roles=[]}delete
41417 [http-nio-8080-exec-10] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:29
41425 [http-nio-8080-exec-10] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
41425 [http-nio-8080-exec-10] INFO  com.example.EX18.Service.Service
                – Find all users
41431 [http-nio-8080-exec-10] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:6
41455 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
41456 [http-nio-8080-exec-1] INFO  com.example.EX18.Service.Service
                – Find all users
41460 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:4
45863 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getPosts
45863 [http-nio-8080-exec-2] INFO  com.example.EX18.Service.Service
                – Find all posts
45866 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:3
48919 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: savePost
48919 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: send
53356 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:4436
53370 [http-nio-8080-exec-3] INFO  com.example.EX18.Service.Service
                – Post Post{id=74, text='Привет, админ', creationDate='25 марта', author=User{id=26, firstName='null', lastName='null', middleName='null', birthDate='null', username='degtyarev02', password='$2a$08$drF8j3flqNlZnW7LK4VXaehYNarO4isKdgUukY7JLwCiLZH.w24Rm', active=true, password2='null', roles=[USER]}} is create
53370 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:4450
53373 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getPosts
53373 [http-nio-8080-exec-3] INFO  com.example.EX18.Service.Service
                – Find all posts
53376 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:3
56254 [http-nio-8080-exec-4] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
56255 [http-nio-8080-exec-4] INFO  com.example.EX18.Service.Service
                – Find all users
56261 [http-nio-8080-exec-4] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:6
57480 [http-nio-8080-exec-5] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: findUser
57490 [http-nio-8080-exec-5] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:10
57490 [http-nio-8080-exec-5] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: deleteUser
57495 [http-nio-8080-exec-5] INFO  com.example.EX18.Service.Service
                – UserUser{id=26, firstName='null', lastName='null', middleName='null', birthDate='null', username='degtyarev02', password='$2a$08$drF8j3flqNlZnW7LK4VXaehYNarO4isKdgUukY7JLwCiLZH.w24Rm', active=true, password2='null', roles=[]}delete
57495 [http-nio-8080-exec-5] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:5
57504 [http-nio-8080-exec-5] WARN  o.h.e.jdbc.spi.SqlExceptionHelper
                – SQL Error: 0, SQLState: 23503
57505 [http-nio-8080-exec-5] ERROR o.h.e.jdbc.spi.SqlExceptionHelper
                – ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(26) всё ещё есть ссылки в таблице "posts".
57506 [http-nio-8080-exec-5] INFO  o.h.e.j.b.i.AbstractBatchImpl
                – HHH000010: On release of batch it still contained JDBC statements
57524 [http-nio-8080-exec-5] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet]
                – Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(26) всё ещё есть ссылки в таблице "posts".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:166)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:134)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3958)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1402)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:493)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3285)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2420)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at com.example.EX18.Service.Service$$EnhancerBySpringCGLIB$$3046d942.deleteUser(<generated>)
	at com.example.EX18.Controllers.UserController.deleteUsers(UserController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:142)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:82)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
109427 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Closing JPA EntityManagerFactory for persistence unit 'default'
109430 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown initiated...
109436 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown completed.
953  [main] INFO  com.example.EX18.Ex18Application
                – Starting Ex18Application using Java 17.0.3 on vladimir-bohkwax9x with PID 33312 (/home/vladimir/Downloads/JavaPatternMirea/EX18/target/classes started by vladimir in /home/vladimir/Downloads/JavaPatternMirea/EX18)
960  [main] INFO  com.example.EX18.Ex18Application
                – No active profile set, falling back to 1 default profile: "default"
982  [background-preinit] INFO  o.h.validator.internal.util.Version
                – HV000001: Hibernate Validator 6.2.2.Final
1918 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Bootstrapping Spring Data JPA repositories in DEFAULT mode.
1975 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Finished Spring Data repository scanning in 49 ms. Found 2 JPA repository interfaces.
2751 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat initialized with port(s): 8080 (http)
2760 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Initializing ProtocolHandler ["http-nio-8080"]
2761 [main] INFO  o.a.catalina.core.StandardService
                – Starting service [Tomcat]
2761 [main] INFO  o.a.catalina.core.StandardEngine
                – Starting Servlet engine: [Apache Tomcat/9.0.58]
2835 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring embedded WebApplicationContext
2835 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext
                – Root WebApplicationContext: initialization completed in 1750 ms
3043 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Starting...
3133 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Start completed.
3197 [main] INFO  o.h.jpa.internal.util.LogHelper
                – HHH000204: Processing PersistenceUnitInfo [name: default]
3240 [main] INFO  org.hibernate.Version
                – HHH000412: Hibernate ORM core version 5.6.5.Final
3383 [main] INFO  o.h.annotations.common.Version
                – HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
3489 [main] INFO  org.hibernate.dialect.Dialect
                – HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
4300 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator
                – HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
4313 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Initialized JPA EntityManagerFactory for persistence unit 'default'
4959 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration
                – spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
5242 [main] INFO  o.s.s.w.DefaultSecurityFilterChain
                – Will not secure any request
6022 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Starting ProtocolHandler ["http-nio-8080"]
6036 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat started on port(s): 8080 (http) with context path ''
6048 [main] INFO  o.s.s.a.ScheduledAnnotationBeanPostProcessor
                – No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
6059 [main] INFO  com.example.EX18.Ex18Application
                – Started Ex18Application in 5.608 seconds (JVM running for 7.234)
7919 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring DispatcherServlet 'dispatcherServlet'
7919 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Initializing Servlet 'dispatcherServlet'
7921 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Completed initialization in 1 ms
9675 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
9682 [http-nio-8080-exec-2] INFO  com.example.EX18.Service.Service
                – Find all users
9826 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:150
10917 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: findUser
10930 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:13
10931 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: deleteUser
10968 [http-nio-8080-exec-3] INFO  com.example.EX18.Service.Service
                – UserUser{id=26, firstName='null', lastName='null', middleName='null', birthDate='null', username='degtyarev02', password='$2a$08$drF8j3flqNlZnW7LK4VXaehYNarO4isKdgUukY7JLwCiLZH.w24Rm', active=true, password2='null', roles=[]}delete
10969 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:38
10988 [http-nio-8080-exec-3] WARN  o.h.e.jdbc.spi.SqlExceptionHelper
                – SQL Error: 0, SQLState: 23503
10988 [http-nio-8080-exec-3] ERROR o.h.e.jdbc.spi.SqlExceptionHelper
                – ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(26) всё ещё есть ссылки в таблице "posts".
10990 [http-nio-8080-exec-3] INFO  o.h.e.j.b.i.AbstractBatchImpl
                – HHH000010: On release of batch it still contained JDBC statements
11008 [http-nio-8080-exec-3] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet]
                – Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(26) всё ещё есть ссылки в таблице "posts".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:166)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:134)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3958)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1402)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:493)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3285)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2420)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at com.example.EX18.Service.Service$$EnhancerBySpringCGLIB$$c0d0f283.deleteUser(<generated>)
	at com.example.EX18.Controllers.UserController.deleteUsers(UserController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:142)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:82)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
339446 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Closing JPA EntityManagerFactory for persistence unit 'default'
339448 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown initiated...
339455 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown completed.
1106 [background-preinit] INFO  o.h.validator.internal.util.Version
                – HV000001: Hibernate Validator 6.2.2.Final
1139 [main] INFO  com.example.EX18.Ex18Application
                – Starting Ex18Application using Java 17.0.3 on vladimir-bohkwax9x with PID 34908 (/home/vladimir/Downloads/JavaPatternMirea/EX18/target/classes started by vladimir in /home/vladimir/Downloads/JavaPatternMirea/EX18)
1145 [main] INFO  com.example.EX18.Ex18Application
                – No active profile set, falling back to 1 default profile: "default"
2060 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2128 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Finished Spring Data repository scanning in 56 ms. Found 2 JPA repository interfaces.
2915 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat initialized with port(s): 8080 (http)
2924 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Initializing ProtocolHandler ["http-nio-8080"]
2925 [main] INFO  o.a.catalina.core.StandardService
                – Starting service [Tomcat]
2926 [main] INFO  o.a.catalina.core.StandardEngine
                – Starting Servlet engine: [Apache Tomcat/9.0.58]
2994 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring embedded WebApplicationContext
2995 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext
                – Root WebApplicationContext: initialization completed in 1734 ms
3154 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Starting...
3260 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Start completed.
3330 [main] INFO  o.h.jpa.internal.util.LogHelper
                – HHH000204: Processing PersistenceUnitInfo [name: default]
3382 [main] INFO  org.hibernate.Version
                – HHH000412: Hibernate ORM core version 5.6.5.Final
3522 [main] INFO  o.h.annotations.common.Version
                – HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
3620 [main] INFO  org.hibernate.dialect.Dialect
                – HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
4435 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator
                – HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
4448 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Initialized JPA EntityManagerFactory for persistence unit 'default'
5141 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration
                – spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
5347 [main] INFO  o.s.s.w.DefaultSecurityFilterChain
                – Will not secure any request
6023 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Starting ProtocolHandler ["http-nio-8080"]
6039 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat started on port(s): 8080 (http) with context path ''
6052 [main] INFO  o.s.s.a.ScheduledAnnotationBeanPostProcessor
                – No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
6063 [main] INFO  com.example.EX18.Ex18Application
                – Started Ex18Application in 5.606 seconds (JVM running for 6.955)
6288 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring DispatcherServlet 'dispatcherServlet'
6288 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Initializing Servlet 'dispatcherServlet'
6291 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Completed initialization in 2 ms
20997 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
21005 [http-nio-8080-exec-2] INFO  com.example.EX18.Service.Service
                – Find all users
21132 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:135
21499 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
21500 [http-nio-8080-exec-3] INFO  com.example.EX18.Service.Service
                – Find all users
21507 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:7
23718 [http-nio-8080-exec-4] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: findUser
23738 [http-nio-8080-exec-4] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:19
23740 [http-nio-8080-exec-4] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: deleteUser
23789 [http-nio-8080-exec-4] INFO  com.example.EX18.Service.Service
                – UserUser{id=26, firstName='null', lastName='null', middleName='null', birthDate='null', username='degtyarev02', password='$2a$08$drF8j3flqNlZnW7LK4VXaehYNarO4isKdgUukY7JLwCiLZH.w24Rm', active=true, password2='null', roles=[]}delete
23790 [http-nio-8080-exec-4] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:50
23807 [http-nio-8080-exec-4] WARN  o.h.e.jdbc.spi.SqlExceptionHelper
                – SQL Error: 0, SQLState: 23503
23807 [http-nio-8080-exec-4] ERROR o.h.e.jdbc.spi.SqlExceptionHelper
                – ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(26) всё ещё есть ссылки в таблице "posts".
23809 [http-nio-8080-exec-4] INFO  o.h.e.j.b.i.AbstractBatchImpl
                – HHH000010: On release of batch it still contained JDBC statements
23826 [http-nio-8080-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet]
                – Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(26) всё ещё есть ссылки в таблице "posts".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:166)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:134)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3958)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1402)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:493)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3285)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2420)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at com.example.EX18.Service.Service$$EnhancerBySpringCGLIB$$6dad1e7b.deleteUser(<generated>)
	at com.example.EX18.Controllers.UserController.deleteUsers(UserController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:142)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:82)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
68518 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Closing JPA EntityManagerFactory for persistence unit 'default'
68520 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown initiated...
68527 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown completed.
878  [main] INFO  com.example.EX18.Ex18Application
                – Starting Ex18Application using Java 17.0.3 on vladimir-bohkwax9x with PID 35261 (/home/vladimir/Downloads/JavaPatternMirea/EX18/target/classes started by vladimir in /home/vladimir/Downloads/JavaPatternMirea/EX18)
881  [main] INFO  com.example.EX18.Ex18Application
                – No active profile set, falling back to 1 default profile: "default"
906  [background-preinit] INFO  o.h.validator.internal.util.Version
                – HV000001: Hibernate Validator 6.2.2.Final
1843 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Bootstrapping Spring Data JPA repositories in DEFAULT mode.
1914 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Finished Spring Data repository scanning in 60 ms. Found 2 JPA repository interfaces.
2816 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat initialized with port(s): 8080 (http)
2827 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Initializing ProtocolHandler ["http-nio-8080"]
2828 [main] INFO  o.a.catalina.core.StandardService
                – Starting service [Tomcat]
2828 [main] INFO  o.a.catalina.core.StandardEngine
                – Starting Servlet engine: [Apache Tomcat/9.0.58]
2916 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring embedded WebApplicationContext
2917 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext
                – Root WebApplicationContext: initialization completed in 1963 ms
3136 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Starting...
3238 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Start completed.
3310 [main] INFO  o.h.jpa.internal.util.LogHelper
                – HHH000204: Processing PersistenceUnitInfo [name: default]
3375 [main] INFO  org.hibernate.Version
                – HHH000412: Hibernate ORM core version 5.6.5.Final
3533 [main] INFO  o.h.annotations.common.Version
                – HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
3654 [main] INFO  org.hibernate.dialect.Dialect
                – HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
4540 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator
                – HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
4555 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Initialized JPA EntityManagerFactory for persistence unit 'default'
5306 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration
                – spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
5556 [main] INFO  o.s.s.w.DefaultSecurityFilterChain
                – Will not secure any request
6300 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Starting ProtocolHandler ["http-nio-8080"]
6318 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat started on port(s): 8080 (http) with context path ''
6332 [main] INFO  o.s.s.a.ScheduledAnnotationBeanPostProcessor
                – No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
6345 [main] INFO  com.example.EX18.Ex18Application
                – Started Ex18Application in 5.918 seconds (JVM running for 8.352)
14784 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring DispatcherServlet 'dispatcherServlet'
14784 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Initializing Servlet 'dispatcherServlet'
14786 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Completed initialization in 1 ms
14900 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: findUser
15052 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:152
15053 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: deleteUser
72841 [http-nio-8080-exec-1] INFO  com.example.EX18.Service.Service
                – UserUser{id=26, firstName='null', lastName='null', middleName='null', birthDate='null', username='degtyarev02', password='$2a$08$drF8j3flqNlZnW7LK4VXaehYNarO4isKdgUukY7JLwCiLZH.w24Rm', active=true, password2='null', roles=[]}delete
72842 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:57789
72866 [http-nio-8080-exec-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper
                – SQL Error: 0, SQLState: 23503
72867 [http-nio-8080-exec-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper
                – ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(26) всё ещё есть ссылки в таблице "posts".
72869 [http-nio-8080-exec-1] INFO  o.h.e.j.b.i.AbstractBatchImpl
                – HHH000010: On release of batch it still contained JDBC statements
72977 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Closing JPA EntityManagerFactory for persistence unit 'default'
72981 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown initiated...
73013 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown completed.
1000 [background-preinit] INFO  o.h.validator.internal.util.Version
                – HV000001: Hibernate Validator 6.2.2.Final
1012 [main] INFO  com.example.EX18.Ex18Application
                – Starting Ex18Application using Java 17.0.3 on vladimir-bohkwax9x with PID 35521 (/home/vladimir/Downloads/JavaPatternMirea/EX18/target/classes started by vladimir in /home/vladimir/Downloads/JavaPatternMirea/EX18)
1013 [main] INFO  com.example.EX18.Ex18Application
                – No active profile set, falling back to 1 default profile: "default"
1906 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Bootstrapping Spring Data JPA repositories in DEFAULT mode.
1964 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Finished Spring Data repository scanning in 50 ms. Found 2 JPA repository interfaces.
2691 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat initialized with port(s): 8080 (http)
2700 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Initializing ProtocolHandler ["http-nio-8080"]
2701 [main] INFO  o.a.catalina.core.StandardService
                – Starting service [Tomcat]
2701 [main] INFO  o.a.catalina.core.StandardEngine
                – Starting Servlet engine: [Apache Tomcat/9.0.58]
2773 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring embedded WebApplicationContext
2773 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext
                – Root WebApplicationContext: initialization completed in 1683 ms
2951 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Starting...
3028 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Start completed.
3084 [main] INFO  o.h.jpa.internal.util.LogHelper
                – HHH000204: Processing PersistenceUnitInfo [name: default]
3122 [main] INFO  org.hibernate.Version
                – HHH000412: Hibernate ORM core version 5.6.5.Final
3265 [main] INFO  o.h.annotations.common.Version
                – HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
3379 [main] INFO  org.hibernate.dialect.Dialect
                – HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
4135 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator
                – HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
4146 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Initialized JPA EntityManagerFactory for persistence unit 'default'
4745 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration
                – spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
4969 [main] INFO  o.s.s.w.DefaultSecurityFilterChain
                – Will not secure any request
5686 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Starting ProtocolHandler ["http-nio-8080"]
5701 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat started on port(s): 8080 (http) with context path ''
5714 [main] INFO  o.s.s.a.ScheduledAnnotationBeanPostProcessor
                – No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
5726 [main] INFO  com.example.EX18.Ex18Application
                – Started Ex18Application in 5.201 seconds (JVM running for 6.436)
11748 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring DispatcherServlet 'dispatcherServlet'
11749 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Initializing Servlet 'dispatcherServlet'
11751 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Completed initialization in 2 ms
11843 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: findUser
11954 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:110
11955 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: deleteUser
12014 [http-nio-8080-exec-1] INFO  com.example.EX18.Service.Service
                – UserUser{id=26, firstName='null', lastName='null', middleName='null', birthDate='null', username='degtyarev02', password='$2a$08$drF8j3flqNlZnW7LK4VXaehYNarO4isKdgUukY7JLwCiLZH.w24Rm', active=true, password2='null', roles=[]}delete
12014 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:58
12041 [http-nio-8080-exec-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper
                – SQL Error: 0, SQLState: 23503
12041 [http-nio-8080-exec-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper
                – ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(26) всё ещё есть ссылки в таблице "posts".
12045 [http-nio-8080-exec-1] INFO  o.h.e.j.b.i.AbstractBatchImpl
                – HHH000010: On release of batch it still contained JDBC statements
12072 [http-nio-8080-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet]
                – Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(26) всё ещё есть ссылки в таблице "posts".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:166)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:134)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3958)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1402)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:493)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3285)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2420)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at com.example.EX18.Service.Service$$EnhancerBySpringCGLIB$$5eba5f31.deleteUser(<generated>)
	at com.example.EX18.Controllers.UserController.deleteUsers(UserController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:142)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:82)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
20395 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getPosts
20395 [http-nio-8080-exec-2] INFO  com.example.EX18.Service.Service
                – Find all posts
20423 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:28
37764 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Closing JPA EntityManagerFactory for persistence unit 'default'
37767 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown initiated...
37773 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown completed.
1106 [background-preinit] INFO  o.h.validator.internal.util.Version
                – HV000001: Hibernate Validator 6.2.2.Final
1108 [main] INFO  com.example.EX18.Ex18Application
                – Starting Ex18Application using Java 17.0.3 on vladimir-bohkwax9x with PID 35725 (/home/vladimir/Downloads/JavaPatternMirea/EX18/target/classes started by vladimir in /home/vladimir/Downloads/JavaPatternMirea/EX18)
1110 [main] INFO  com.example.EX18.Ex18Application
                – No active profile set, falling back to 1 default profile: "default"
2467 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2586 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Finished Spring Data repository scanning in 102 ms. Found 2 JPA repository interfaces.
3920 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat initialized with port(s): 8080 (http)
3932 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Initializing ProtocolHandler ["http-nio-8080"]
3934 [main] INFO  o.a.catalina.core.StandardService
                – Starting service [Tomcat]
3934 [main] INFO  o.a.catalina.core.StandardEngine
                – Starting Servlet engine: [Apache Tomcat/9.0.58]
1189 [main] INFO  com.example.EX18.Ex18Application
                – Starting Ex18Application using Java 17.0.3 on vladimir-bohkwax9x with PID 35820 (/home/vladimir/Downloads/JavaPatternMirea/EX18/target/classes started by vladimir in /home/vladimir/Downloads/JavaPatternMirea/EX18)
1194 [main] INFO  com.example.EX18.Ex18Application
                – No active profile set, falling back to 1 default profile: "default"
1199 [background-preinit] INFO  o.h.validator.internal.util.Version
                – HV000001: Hibernate Validator 6.2.2.Final
4047 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring embedded WebApplicationContext
4048 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext
                – Root WebApplicationContext: initialization completed in 2850 ms
4301 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Starting...
4422 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Start completed.
4492 [main] INFO  o.h.jpa.internal.util.LogHelper
                – HHH000204: Processing PersistenceUnitInfo [name: default]
4541 [main] INFO  org.hibernate.Version
                – HHH000412: Hibernate ORM core version 5.6.5.Final
4692 [main] INFO  o.h.annotations.common.Version
                – HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
4805 [main] INFO  org.hibernate.dialect.Dialect
                – HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2223 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2322 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Finished Spring Data repository scanning in 88 ms. Found 2 JPA repository interfaces.
5728 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator
                – HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
5738 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Initialized JPA EntityManagerFactory for persistence unit 'default'
3300 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat initialized with port(s): 8080 (http)
3313 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Initializing ProtocolHandler ["http-nio-8080"]
3314 [main] INFO  o.a.catalina.core.StandardService
                – Starting service [Tomcat]
3314 [main] INFO  o.a.catalina.core.StandardEngine
                – Starting Servlet engine: [Apache Tomcat/9.0.58]
3412 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring embedded WebApplicationContext
3413 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext
                – Root WebApplicationContext: initialization completed in 2141 ms
6470 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration
                – spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
3633 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Starting...
3739 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Start completed.
3807 [main] INFO  o.h.jpa.internal.util.LogHelper
                – HHH000204: Processing PersistenceUnitInfo [name: default]
3878 [main] INFO  org.hibernate.Version
                – HHH000412: Hibernate ORM core version 5.6.5.Final
6739 [main] INFO  o.s.s.w.DefaultSecurityFilterChain
                – Will not secure any request
4050 [main] INFO  o.h.annotations.common.Version
                – HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
4187 [main] INFO  org.hibernate.dialect.Dialect
                – HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
7498 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Starting ProtocolHandler ["http-nio-8080"]
7515 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat started on port(s): 8080 (http) with context path ''
7528 [main] INFO  o.s.s.a.ScheduledAnnotationBeanPostProcessor
                – No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
7540 [main] INFO  com.example.EX18.Ex18Application
                – Started Ex18Application in 6.923 seconds (JVM running for 8.451)
5229 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator
                – HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
5244 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Initialized JPA EntityManagerFactory for persistence unit 'default'
6166 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration
                – spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
6416 [main] INFO  o.s.s.w.DefaultSecurityFilterChain
                – Will not secure any request
7150 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Starting ProtocolHandler ["http-nio-8080"]
7158 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext
                – Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat server
7164 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Closing JPA EntityManagerFactory for persistence unit 'default'
7166 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown initiated...
7172 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown completed.
7177 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Pausing ProtocolHandler ["http-nio-8080"]
7177 [main] INFO  o.a.catalina.core.StandardService
                – Stopping service [Tomcat]
7182 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Stopping ProtocolHandler ["http-nio-8080"]
7183 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Destroying ProtocolHandler ["http-nio-8080"]
7196 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener
                – 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
7220 [main] ERROR o.s.boot.SpringApplication
                – Application run failed
org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat server
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:181)
	at org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:54)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:356)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:155)
	at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:123)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:935)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:586)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301)
	at com.example.EX18.Ex18Application.main(Ex18Application.java:12)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat server
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:229)
	at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:43)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178)
	... 14 common frames omitted
Caused by: java.lang.IllegalArgumentException: standardService.connector.startFailed
	at org.apache.catalina.core.StandardService.addConnector(StandardService.java:238)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.addPreviouslyRemovedConnectors(TomcatWebServer.java:282)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:213)
	... 16 common frames omitted
Caused by: org.apache.catalina.LifecycleException: Protocol handler start failed
	at org.apache.catalina.connector.Connector.startInternal(Connector.java:1075)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	at org.apache.catalina.core.StandardService.addConnector(StandardService.java:234)
	... 18 common frames omitted
Caused by: java.net.BindException: Адрес уже используется
	at java.base/sun.nio.ch.Net.bind0(Native Method)
	at java.base/sun.nio.ch.Net.bind(Net.java:555)
	at java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:337)
	at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:294)
	at org.apache.tomcat.util.net.NioEndpoint.initServerSocket(NioEndpoint.java:273)
	at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:228)
	at org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1213)
	at org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1299)
	at org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:614)
	at org.apache.catalina.connector.Connector.startInternal(Connector.java:1072)
	... 20 common frames omitted
16417 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Closing JPA EntityManagerFactory for persistence unit 'default'
16420 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown initiated...
16426 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown completed.
1207 [background-preinit] INFO  o.h.validator.internal.util.Version
                – HV000001: Hibernate Validator 6.2.2.Final
1216 [main] INFO  com.example.EX18.Ex18Application
                – Starting Ex18Application using Java 17.0.3 on vladimir-bohkwax9x with PID 36066 (/home/vladimir/Downloads/JavaPatternMirea/EX18/target/classes started by vladimir in /home/vladimir/Downloads/JavaPatternMirea/EX18)
1218 [main] INFO  com.example.EX18.Ex18Application
                – No active profile set, falling back to 1 default profile: "default"
2165 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2248 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Finished Spring Data repository scanning in 70 ms. Found 2 JPA repository interfaces.
3150 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat initialized with port(s): 8080 (http)
3161 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Initializing ProtocolHandler ["http-nio-8080"]
3161 [main] INFO  o.a.catalina.core.StandardService
                – Starting service [Tomcat]
3162 [main] INFO  o.a.catalina.core.StandardEngine
                – Starting Servlet engine: [Apache Tomcat/9.0.58]
3245 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring embedded WebApplicationContext
3245 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext
                – Root WebApplicationContext: initialization completed in 1955 ms
3461 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Starting...
3560 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Start completed.
3623 [main] INFO  o.h.jpa.internal.util.LogHelper
                – HHH000204: Processing PersistenceUnitInfo [name: default]
3674 [main] INFO  org.hibernate.Version
                – HHH000412: Hibernate ORM core version 5.6.5.Final
3828 [main] INFO  o.h.annotations.common.Version
                – HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
3964 [main] INFO  org.hibernate.dialect.Dialect
                – HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
4870 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator
                – HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
4885 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Initialized JPA EntityManagerFactory for persistence unit 'default'
5585 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration
                – spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
5872 [main] INFO  o.s.s.w.DefaultSecurityFilterChain
                – Will not secure any request
6632 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Starting ProtocolHandler ["http-nio-8080"]
6651 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat started on port(s): 8080 (http) with context path ''
6664 [main] INFO  o.s.s.a.ScheduledAnnotationBeanPostProcessor
                – No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
6676 [main] INFO  com.example.EX18.Ex18Application
                – Started Ex18Application in 5.986 seconds (JVM running for 7.906)
27840 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring DispatcherServlet 'dispatcherServlet'
27841 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Initializing Servlet 'dispatcherServlet'
27844 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Completed initialization in 3 ms
27944 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
27953 [http-nio-8080-exec-1] INFO  com.example.EX18.Service.Service
                – Find all users
28107 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:163
29779 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: findUser
29799 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:20
29800 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: deleteUser
58224 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool
                – HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=54s564ms75µs433ns).
117945 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool
                – HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=59s720ms972µs716ns).
117954 [http-nio-8080-exec-2] INFO  com.example.EX18.Service.Service
                – UserUser{id=26, firstName='null', lastName='null', middleName='null', birthDate='null', username='degtyarev02', password='$2a$08$drF8j3flqNlZnW7LK4VXaehYNarO4isKdgUukY7JLwCiLZH.w24Rm', active=true, password2='null', roles=[]}delete
117957 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:88156
117980 [http-nio-8080-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper
                – SQL Error: 0, SQLState: 23503
117980 [http-nio-8080-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper
                – ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(26) всё ещё есть ссылки в таблице "posts".
117983 [http-nio-8080-exec-2] INFO  o.h.e.j.b.i.AbstractBatchImpl
                – HHH000010: On release of batch it still contained JDBC statements
118135 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Closing JPA EntityManagerFactory for persistence unit 'default'
118138 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown initiated...
118152 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown completed.
870  [background-preinit] INFO  o.h.validator.internal.util.Version
                – HV000001: Hibernate Validator 6.2.2.Final
874  [main] INFO  com.example.EX18.Ex18Application
                – Starting Ex18Application using Java 17.0.3 on vladimir-bohkwax9x with PID 36399 (/home/vladimir/Downloads/JavaPatternMirea/EX18/target/classes started by vladimir in /home/vladimir/Downloads/JavaPatternMirea/EX18)
876  [main] INFO  com.example.EX18.Ex18Application
                – No active profile set, falling back to 1 default profile: "default"
1730 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Bootstrapping Spring Data JPA repositories in DEFAULT mode.
1784 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Finished Spring Data repository scanning in 46 ms. Found 2 JPA repository interfaces.
2632 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat initialized with port(s): 8080 (http)
2641 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Initializing ProtocolHandler ["http-nio-8080"]
2642 [main] INFO  o.a.catalina.core.StandardService
                – Starting service [Tomcat]
2643 [main] INFO  o.a.catalina.core.StandardEngine
                – Starting Servlet engine: [Apache Tomcat/9.0.58]
2726 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring embedded WebApplicationContext
2727 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext
                – Root WebApplicationContext: initialization completed in 1782 ms
2884 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Starting...
2973 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Start completed.
3034 [main] INFO  o.h.jpa.internal.util.LogHelper
                – HHH000204: Processing PersistenceUnitInfo [name: default]
3076 [main] INFO  org.hibernate.Version
                – HHH000412: Hibernate ORM core version 5.6.5.Final
3227 [main] INFO  o.h.annotations.common.Version
                – HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
3334 [main] INFO  org.hibernate.dialect.Dialect
                – HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
4120 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator
                – HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
4133 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Initialized JPA EntityManagerFactory for persistence unit 'default'
4757 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration
                – spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
4967 [main] INFO  o.s.s.w.DefaultSecurityFilterChain
                – Will not secure any request
5657 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Starting ProtocolHandler ["http-nio-8080"]
5672 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat started on port(s): 8080 (http) with context path ''
5685 [main] INFO  o.s.s.a.ScheduledAnnotationBeanPostProcessor
                – No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
5695 [main] INFO  com.example.EX18.Ex18Application
                – Started Ex18Application in 5.308 seconds (JVM running for 6.372)
7805 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring DispatcherServlet 'dispatcherServlet'
7806 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Initializing Servlet 'dispatcherServlet'
7807 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Completed initialization in 1 ms
7895 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getPosts
7903 [http-nio-8080-exec-1] INFO  com.example.EX18.Service.Service
                – Find all posts
8024 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:129
11640 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: savePost
11641 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: send
18975 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:7334
19006 [http-nio-8080-exec-2] INFO  com.example.EX18.Service.Service
                – Post Post{id=75, text='ds', creationDate='25 марта', author=User{id=26, firstName='null', lastName='null', middleName='null', birthDate='null', username='degtyarev02', password='$2a$08$drF8j3flqNlZnW7LK4VXaehYNarO4isKdgUukY7JLwCiLZH.w24Rm', active=true, password2='null', roles=[USER]}} is create
19006 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:7365
19017 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getPosts
19018 [http-nio-8080-exec-2] INFO  com.example.EX18.Service.Service
                – Find all posts
19025 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:7
26045 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Closing JPA EntityManagerFactory for persistence unit 'default'
26048 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown initiated...
26055 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown completed.
1023 [main] INFO  com.example.EX18.Ex18Application
                – Starting Ex18Application using Java 17.0.3 on vladimir-bohkwax9x with PID 36604 (/home/vladimir/Downloads/JavaPatternMirea/EX18/target/classes started by vladimir in /home/vladimir/Downloads/JavaPatternMirea/EX18)
1027 [main] INFO  com.example.EX18.Ex18Application
                – No active profile set, falling back to 1 default profile: "default"
1028 [background-preinit] INFO  o.h.validator.internal.util.Version
                – HV000001: Hibernate Validator 6.2.2.Final
1927 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2002 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate
                – Finished Spring Data repository scanning in 58 ms. Found 2 JPA repository interfaces.
2857 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat initialized with port(s): 8080 (http)
2868 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Initializing ProtocolHandler ["http-nio-8080"]
2868 [main] INFO  o.a.catalina.core.StandardService
                – Starting service [Tomcat]
2869 [main] INFO  o.a.catalina.core.StandardEngine
                – Starting Servlet engine: [Apache Tomcat/9.0.58]
2957 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring embedded WebApplicationContext
2957 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext
                – Root WebApplicationContext: initialization completed in 1858 ms
3128 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Starting...
3225 [main] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Start completed.
3307 [main] INFO  o.h.jpa.internal.util.LogHelper
                – HHH000204: Processing PersistenceUnitInfo [name: default]
3365 [main] INFO  org.hibernate.Version
                – HHH000412: Hibernate ORM core version 5.6.5.Final
3516 [main] INFO  o.h.annotations.common.Version
                – HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
3648 [main] INFO  org.hibernate.dialect.Dialect
                – HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
4528 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator
                – HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
4543 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Initialized JPA EntityManagerFactory for persistence unit 'default'
5363 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration
                – spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
5620 [main] INFO  o.s.s.w.DefaultSecurityFilterChain
                – Will not secure any request
6386 [main] INFO  o.a.coyote.http11.Http11NioProtocol
                – Starting ProtocolHandler ["http-nio-8080"]
6403 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer
                – Tomcat started on port(s): 8080 (http) with context path ''
6417 [main] INFO  o.s.s.a.ScheduledAnnotationBeanPostProcessor
                – No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
6430 [main] INFO  com.example.EX18.Ex18Application
                – Started Ex18Application in 5.946 seconds (JVM running for 7.262)
11364 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/]
                – Initializing Spring DispatcherServlet 'dispatcherServlet'
11365 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Initializing Servlet 'dispatcherServlet'
11366 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet
                – Completed initialization in 1 ms
11507 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: savePost
11515 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: send
13840 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:2325
13910 [http-nio-8080-exec-1] INFO  com.example.EX18.Service.Service
                – Post Post{id=76, text='ds', creationDate='25 марта', author=User{id=26, firstName='null', lastName='null', middleName='null', birthDate='null', username='degtyarev02', password='$2a$08$drF8j3flqNlZnW7LK4VXaehYNarO4isKdgUukY7JLwCiLZH.w24Rm', active=true, password2='null', roles=[USER]}} is create
13910 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:2395
13923 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getPosts
13923 [http-nio-8080-exec-1] INFO  com.example.EX18.Service.Service
                – Find all posts
14073 [http-nio-8080-exec-1] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:150
18484 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: findPost
18501 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:17
18502 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: deletePost
18520 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: send
22630 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:4109
22631 [http-nio-8080-exec-2] INFO  com.example.EX18.Service.Service
                – Post Post{id=76, text='ds', creationDate='25 марта', author=null} is delete
22631 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:4110
22657 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getPosts
22657 [http-nio-8080-exec-2] INFO  com.example.EX18.Service.Service
                – Find all posts
22660 [http-nio-8080-exec-2] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:2
22694 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getPosts
22695 [http-nio-8080-exec-3] INFO  com.example.EX18.Service.Service
                – Find all posts
22702 [http-nio-8080-exec-3] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:8
29826 [http-nio-8080-exec-4] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
29827 [http-nio-8080-exec-4] INFO  com.example.EX18.Service.Service
                – Find all users
29843 [http-nio-8080-exec-4] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:15
30332 [http-nio-8080-exec-5] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: getUsers
30333 [http-nio-8080-exec-5] INFO  com.example.EX18.Service.Service
                – Find all users
30340 [http-nio-8080-exec-5] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:7
31560 [http-nio-8080-exec-6] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: findUser
31566 [http-nio-8080-exec-6] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:6
31567 [http-nio-8080-exec-6] INFO  com.example.EX18.Aspect.MainAOP
                – Method name: deleteUser
67358 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool
                – HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m4s33ms259µs589ns).
67384 [http-nio-8080-exec-6] INFO  com.example.EX18.Service.Service
                – UserUser{id=26, firstName='null', lastName='null', middleName='null', birthDate='null', username='degtyarev02', password='$2a$08$drF8j3flqNlZnW7LK4VXaehYNarO4isKdgUukY7JLwCiLZH.w24Rm', active=true, password2='null', roles=[]}delete
67384 [http-nio-8080-exec-6] INFO  com.example.EX18.Aspect.MainAOP
                – Execution time:35817
67399 [http-nio-8080-exec-6] WARN  o.h.e.jdbc.spi.SqlExceptionHelper
                – SQL Error: 0, SQLState: 23503
67399 [http-nio-8080-exec-6] ERROR o.h.e.jdbc.spi.SqlExceptionHelper
                – ОШИБКА: UPDATE или DELETE в таблице "usr" нарушает ограничение внешнего ключа "fktjkpt884hbo180eiygtuytac6" таблицы "posts"
  Подробности: На ключ (id)=(26) всё ещё есть ссылки в таблице "posts".
67403 [http-nio-8080-exec-6] INFO  o.h.e.j.b.i.AbstractBatchImpl
                – HHH000010: On release of batch it still contained JDBC statements
67536 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean
                – Closing JPA EntityManagerFactory for persistence unit 'default'
67538 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown initiated...
67545 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource
                – HikariPool-1 - Shutdown completed.
